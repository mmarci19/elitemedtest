    
    <!DOCTYPE html>
    <html lang="en">
    <head>
      <!-- Bootstrap -->
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.10.1/jquery.min.js"></script> 
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.11.0/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js" integrity="sha384-OgVRvuATP1z7JjHLkuOU7Xw704+h835Lr+6QL9UvYjZE3Ipu6Tp75j7Bh/kR0JKI" crossorigin="anonymous"></script>
    
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css" integrity="sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk" crossorigin="anonymous">
    
    <head>
    
      <meta charset="utf-8">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <title>Pitch Selector</title>
      <meta name="description" content="Core HTML Project">
      <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    
      <!-- External CSS -->
      <link rel="stylesheet" href="vendor/bootstrap/bootstrap.min.css">
      <link rel="stylesheet" href="vendor/select2/select2.min.css">
      <link rel="stylesheet" href="vendor/owlcarousel/owl.carousel.min.css">
      <link rel="stylesheet" href="vendor/lightcase/lightcase.css">
    
      <!-- Fonts -->
      <link href="https://fonts.googleapis.com/css?family=Lato:300,400|Work+Sans:300,400,700" rel="stylesheet">
    
      <!-- CSS -->
      <link rel="stylesheet" href="https://cdn.linearicons.com/free/1.0.0/icon-font.min.css">
      <link href="https://file.myfontastic.com/7vRKgqrN3iFEnLHuqYhYuL/icons.css" rel="stylesheet">
    
      <!-- Modernizr JS for IE8 support of HTML5 elements and media queries -->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/modernizr/2.8.3/modernizr.js"></script>
      <!-- Bootstrap -->
      <script src=https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.11.0/umd/popper.min.js></script>
      <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js" integrity="sha384-OgVRvuATP1z7JjHLkuOU7Xw704+h835Lr+6QL9UvYjZE3Ipu6Tp75j7Bh/kR0JKI" crossorigin="anonymous"></script>
      <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    
    
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
        
        <!-- SEO Meta Tags -->
        <meta name="description" content="Landing page template built with HTML and Bootstrap 4 for presenting training courses, classes, workshops and for convincing visitors to register using the form.">
        <meta name="author" content="Inovatik">
    
        <!-- OG Meta Tags to improve the way the post looks when you share the page on LinkedIn, Facebook, Google+ -->
      <meta property="og:site_name" content="" /> <!-- website name -->
      <meta property="og:site" content="" /> <!-- website link -->
      <meta property="og:title" content=""/> <!-- title shown in the actual shared post -->
      <meta property="og:description" content="" /> <!-- description shown in the actual shared post -->
      <meta property="og:image" content="" /> <!-- image link, make sure it's jpg -->
      <meta property="og:url" content="" /> <!-- where do you want your post to link to -->
      <meta property="og:type" content="article" />
    
        <!-- Website Title -->
        <title>ASAP</title>
        
    <!-- Styles -->
    <link href="https://fonts.googleapis.com/css?family=Montserrat:400,400i,600,700,700i&display=swap" rel="stylesheet">
    <link href="css/bootstrap.css" rel="stylesheet">
    <link href="css/fontawesome-all.css" rel="stylesheet">
    <link href="css/swiper.css" rel="stylesheet">
	<link href="css/magnific-popup.css" rel="stylesheet">
	<link href="css/styles.css" rel="stylesheet">
  <style>

body, .table-active, th, .table-warning , .table-primary {
  color: whitesmoke;
  background-color:rgb(41, 37, 37);

}

      
    </style>
  	<!-- Favicon  -->
    <link rel="icon" href="icon.png">
</head>
   
  <body data-spy="scroll" data-target=".fixed-top">
          <!-- Preloader -->
	<div class="spinner-wrapper">
    <div class="spinner">
        <div class="bounce1"></div>
        <div class="bounce2"></div>
        <div class="bounce3"></div>
    </div>
</div>
<!-- end of preloader -->
      <!-- end of preloader -->
          <!-- Navigation -->
    <nav class="navbar navbar-expand-lg navbar-dark navbar-custom fixed-top">

      <!-- Text Logo - Use this if you don't have a graphic logo -->
      <!-- <a class="navbar-brand logo-text page-scroll" href="index.html">Corso</a> -->


        <!-- Image Logo -->
        <a href="index.html"><img src="logo.png" width=6% height=6% ></a> 
        
      <!-- Mobile Menu Toggle Button -->
      <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarsExampleDefault" aria-controls="navbarsExampleDefault" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-awesome fas fa-bars"></span>
          <span class="navbar-toggler-awesome fas fa-times"></span>
      </button>
      <!-- end of mobile menu toggle button -->

      <div class="collapse navbar-collapse" id="navbarsExampleDefault">
        <ul class="navbar-nav ml-auto">
            <li class="nav-item">
                <a class="nav-link page-scroll" href="index.html">Main Menu <span class="sr-only">(current)</span></a>
            </li>
            <li class="nav-item">
                <a class="nav-link page-scroll" href="settings.html">Settings</a>
            </li>

            <li class="nav-item">
              <a class="nav-link page-scroll" href="matches.html">Matches</a>
          </li>
          <li class="nav-item">
              <a class="nav-link page-scroll" href="recording.html">Recording</a>
          </li>

          <li class="nav-item">
              <a class="nav-link page-scroll" href="pitch-selector.html">Pitch Selector</a>
          </li>
        </ul>
       
    </div>
  </nav> <!-- end of navbar -->
  <!-- end of navigation -->

<!-- end of partners -->
<div class="container" style="margin-top: 120px">
  <div class="row">
      <div class="col-lg-12">
          <div class="text-container">

            <h1 style="color: whitesmoke">Pitch Selector</h1>

              
                             </div> <!-- end of text-container -->
      </div> <!-- end of col -->
  </div> <!-- end of row -->
</div> <!-- end of container -->

<script>
  var rightReadyBoolean = false;
var leftReadyBoolean = false;

 var naturalWidth = 0
 var naturalHeight = 0
  </script>


  <script>
  function leftReady(){
  document.getElementById('leftTop').checked = false;
  document.getElementById("LeftLeftTop").className = "table-primary";
  document.getElementById('leftBottom').checked = false;
  document.getElementById("LeftLeftBottom").className = "table-primary";
  document.getElementById('rightTop').checked = false;
  document.getElementById("LeftRightTop").className = "table-primary";
  document.getElementById('rightBottom').checked = false;
  document.getElementById("LeftRightBottom").className = "table-primary";

  leftReadyBoolean = !leftReadyBoolean;
  document.getElementById("leftReady1").textContent = "Reset!";
  if(!leftReadyBoolean){
    document.getElementById("leftReady1").className = "btn btn-outline-secondary"
    document.getElementById("leftReady1").textContent = "Set!";
  }
  else{
    document.getElementById("leftReady1").className = "btn btn-outline-warning"
  }

  }
  
  function rightReady(){

  document.getElementById('leftTop2').checked = false;
  document.getElementById("RightLeftTop").className = "table-primary";
  document.getElementById('leftBottom2').checked = false;
  document.getElementById("RightLeftBottom").className = "table-primary";
  document.getElementById('rightTop2').checked = false;
  document.getElementById("RightRightTop").className = "table-primary";
  document.getElementById('rightBottom2').checked = false;
  document.getElementById("RightRightBottom").className = "table-primary";
  rightReadyBoolean = !rightReadyBoolean;
  document.getElementById("rightReady1").textContent = "Reset!"
  document.getElementById("rightReady1").className = "btn btn-outline-secondary"
  if(!rightReadyBoolean){
    document.getElementById("rightReady1").className = "btn btn-outline-secondary"
    document.getElementById("rightReady1").textContent = "Set!";
  }
  else{
    document.getElementById("rightReady1").className = "btn btn-outline-warning"
  }
  }
  
  
    </script>
  
<style>

* {
  
  box-sizing: border-box;

}

.img-zoom-container {
  position: relative;
}

.img-zoom-lens {
  position: absolute;
  border: 1px solid #d4d4d4;
  /*set the size of the lens:*/
  width: 40px;
  height: 40px;
}

.img-zoom-reddot {
  
  border: 3px solid rgb(255, 183, 0);
  /*set the size of the lens:*/

  width: 5px;
  height: 5px;

  margin-left: 50%;
  margin-right: 50%;
  margin-top: 150px;

}

.img-zoom-result {
  position: relative;

  margin-top: 20px;
  margin-bottom: 20px;
  border: 0px solid #d4d4d4;

  /*set the size of the result div:*/

  width: 300px;
  height: 300px;
}


</style>

<div class="container alert alert-success" id="container_id" style="margin-top:10px; display:none">
   <div id="matchIDLabel">
    
  </div>
  <div id="camerasLabel">

  </div>
  <div id="camerasURLLabel">

  </div>
</div>

<div class="container">

  <button style="display: none;" type="button" onclick="camera1Choose()" id="c1" class="btn btn-warning">Camera 1</button>
  <button style="display: none;" type="button" onclick="camera2Choose()" id="c2" class="btn btn-warning">Camera 2</button>
  <button style="display: none;"type="button"  onclick="camera3Choose()"id="c3" class="btn btn-warning">Camera 3</button>
  <button style="display: none;" type="button" onclick="camera4Choose()" id="c4" class="btn btn-warning">Camera 4</button>

</div>

<div class="container">


</div>
  <div class="container" style="margin-top: 15px; display:block">
    <div class="col-lg-4 form-group" id="matchIDsetter">
      
      <!--
      
      <input class="form-control-input" type="text" style="text-align: center;" name="matchid" id="matchidsetterform" />
      <button onclick="setID()"  style="margin-top: 20px" type="button" class="btn btn-secondary">Set Match ID</button>
      
      -->

    </div>
    </button>
    <div class="container" >
      <button style="margin-top: 1em; margin-bottom: 1em" onclick="getImage()" type="button" class="btn btn-warning">Get Image</button>

    </div>

  </div>


  


  <form id="startRecordingForm" action="recording.html" style="margin-top: 20px;" method="GET">
    <input type="hidden" value="" name="id" id="startRecordingFormInput" />
  </form>

  
</div>

<div class="h4 container spinning text-warning" id="loadingText" style="display:none">Loading...</div>

<div class="container spinning" id="loadingBar" style="display:none" >
  
  <div class="spinner-border text-warning" style="margin-left: 25px;"role="status">
  </div>
</div>
<style>

.spinning {
  width: 80px;
  height: 50px;
  /* Center horizontally*/
  margin: 0 auto;
}



</style>
<script>
function sendForm(){
  document.getElementById("startRecordingFormInput").value = matchID;
  document.getElementById("startRecordingForm").submit();
  
}

function buttonChange(success,no1,no2,no3){
document.getElementById(success).className ="btn btn-danger";
document.getElementById(no1).className ="btn btn-secondary";
document.getElementById(no2).className ="btn btn-secondary";
document.getElementById(no3).className ="btn btn-secondary";
}
function camera1Choose(){
cameraURLCurrent = cameraURL1;
buttonChange("c1","c2","c3","c4");
}
function camera2Choose(){
cameraURLCurrent = cameraURL2;
buttonChange("c2","c1","c3","c4");
}
function camera3Choose(){
cameraURLCurrent = cameraURL3;
buttonChange("c3","c1","c2","c4");
}
function camera4Choose(){
  cameraURLCurrent = cameraURL4;
  buttonChange("c4","c2","c3","c1");

}
var matchID=0;
var cameraCount = 0;

var cameraURL1="";
var cameraURL2="";
var cameraURL3="";
var cameraURL4="";

window.onload = function(){
  document.getElementById("myimage").addEventListener("click",printMousePos);

    let prm = new URLSearchParams(window.location.search);
    if(prm.has('id')){
      prm = prm.get('id');
      matchID = prm;
      document.getElementById("container_id").style="display:block; margin-top:20px";
      document.getElementById("matchIDLabel").textContent = "Match ID: " + matchID;
         }
    else{
      matchID=-1;
    }
    let prm2 = new URLSearchParams(window.location.search);
    if(prm2.has('cameraCount')){
      
      cameraCount = prm2.get('cameraCount');
      cameraURL1 = prm2.get('camera1');
      cameraURL2 = prm2.get('camera2');
      cameraURL3 = prm2.get('camera3');
      cameraURL4 = prm2.get('camera4');

      if(cameraCount==1){
      document.getElementById("c1").style="display:inline";
      document.getElementById("c2").style="display:none";
      document.getElementById("c3").style="display:none";
      document.getElementById("c4").style="display:none";
      }
      if(cameraCount==2){
      document.getElementById("c1").style="display:inline";
      document.getElementById("c2").style="display:inline";
      document.getElementById("c3").style="display:none";
      document.getElementById("c4").style="display:none";
      }
      if(cameraCount==3){
      document.getElementById("c1").style="display:inline";
      document.getElementById("c2").style="display:inline";
      document.getElementById("c3").style="display:inline";
      document.getElementById("c4").style="display:none";
      }
      if(cameraCount==4){
      document.getElementById("c1").style="display:inline";
      document.getElementById("c2").style="display:inline";
      document.getElementById("c3").style="display:inline";
      document.getElementById("c4").style="display:inline";
      }
      document.getElementById("camerasLabel").textContent = "Number of cameras: " + cameraCount;
      //document.getElementById("camerasURLLabel").textContent = "URLs: " + cameraURL1 + ", " + cameraURL2 + ", " + cameraURL3 + ", " + cameraURL4;

    }

    testing_dim.src = "https://t3.ftcdn.net/jpg/02/93/12/72/360_F_293127241_bMzrEAk3zhehEnsLw6y4k3HfFewopUPG.jpg";
   
     if(matchID==-1){
       
      document.getElementById("matchIDsetter").style = "display:block; margin-top:20px";


     }


  }

  function setID(){
    matchID = document.getElementById("matchidsetterform").value;
    document.getElementById("matchIDsetter").style = "display:none";
    document.getElementById("container_id").style="display:block; margin-top:20px";
    document.getElementById("matchIDLabel").textContent = "Match ID: " + matchID;



  }

var testing_dim = new Image();
testing_dim.src = "https://t3.ftcdn.net/jpg/02/93/12/72/360_F_293127241_bMzrEAk3zhehEnsLw6y4k3HfFewopUPG.jpg";


var cameraURLCurrent = "";


//Calculate real positions
var width_scale = 0;
var height_scale = 0;


var legacySrc="";

var imageSource = "";

var leftLeftTopX = 0;
var leftLeftBottomX = 0;
var leftRightTopX = 0;
var leftRightBottomX = 0;

var rightLeftTopX = 0;
var rightLeftBottomX = 0;
var rightRightTopX = 0;
var rightRightBottomX = 0;

var leftLeftTopY = 0;
var leftLeftBottomY = 0;
var leftRightTopY = 0;
var leftRightBottomY = 0;

var rightLeftTopY = 0;
var rightLeftBottomY = 0;
var rightRightTopY = 0;
var rightRightBottomY = 0;



function printMousePos(event){
var c_x = -1;
var c_y = -1;
c_x, c_y = getCursorPos;

}

var legacyWidth = 0;
var legacyHeight = 0;

function display(c_x, c_y) {

width_scale = naturalWidth / document.getElementById('myimage').width;
height_scale = naturalHeight / document.getElementById('myimage').height;
//alert(naturalWidth)
//alert(document.getElementById('myimage').width)
if(document.getElementById('leftTop').checked){

  //alert("Coordinates: x = " + c_x + ", y = "+c_y + " added to left side: left top corner.");
  leftLeftTopX = Math.round(c_x*width_scale);
  leftLeftTopY = Math.round(c_y*height_scale);
  document.getElementById("LeftLeftTopX").textContent = (leftLeftTopX) + ", ";
  document.getElementById("LeftLeftTopY").textContent = (leftLeftTopY);
  document.getElementById("LeftLeftTop").className = "table-warning";
}
if(document.getElementById('leftBottom').checked){
  //alert("Coordinates: x = " + c_x + ", y = "+c_y + " added to left side: left bottom corner.");
  leftLeftBottomX = Math.round(c_x*width_scale);
  leftLeftBottomY = Math.round(c_y*height_scale);
  document.getElementById("LeftLeftBottomX").textContent = (leftLeftBottomX) + ", ";
  document.getElementById("LeftLeftBottomY").textContent = (leftLeftBottomY);
  document.getElementById("LeftLeftBottom").className = "table-warning";

}
if(document.getElementById('rightTop').checked){
  leftRightTopX = Math.round(c_x*width_scale);
  leftRightTopY= Math.round(c_y*height_scale);
  //alert("Coordinates: x = " + c_x + ", y = "+c_y + " added to left side: right top corner.");
  document.getElementById("LeftRightTopX").textContent = (leftRightTopX) + ", ";
  document.getElementById("LeftRightTopY").textContent = (leftRightTopY);
  document.getElementById("LeftRightTop").className = "table-warning";
}
if(document.getElementById('rightBottom').checked){
  leftRightBottomX = Math.round(c_x*width_scale);
  leftRightBottomY = Math.round(c_y*height_scale);
  //alert("Coordinates: x = " + c_x + ", y = "+c_y + " added to left side: right bottom corner.");
  document.getElementById("LeftRightBottomX").textContent = (leftRightBottomX) + ", ";
  document.getElementById("LeftRightBottomY").textContent = (leftRightBottomY);
  document.getElementById("LeftRightBottom").className = "table-warning";
}


if(document.getElementById('leftTop2').checked){
  rightLeftTopX = Math.round(c_x*width_scale);
  rightLeftTopY = Math.round(c_y*height_scale);
  //alert("Coordinates: x = " + c_x + ", y = "+c_y + " added to right side: left top corner.");
  document.getElementById("RightLeftTopX").textContent = (rightLeftTopX) + ", ";
  document.getElementById("RightLeftTopY").textContent = (rightLeftTopY);

}
if(document.getElementById('leftBottom2').checked){
  rightLeftBottomX = Math.round(c_x*width_scale);
  rightLeftBottomY= Math.round(c_y*height_scale);
  //alert("Coordinates: x = " + c_x + ", y = "+c_y + " added to right side: left bottom corner.");
  document.getElementById("RightLeftBottomX").textContent = (rightLeftBottomX) + ", ";
  document.getElementById("RightLeftBottomY").textContent = (rightLeftBottomY);
  document.getElementById("RightLeftBottom").className = "table-warning";
}
if(document.getElementById('rightTop2').checked){
  rightRightTopX = Math.round(c_x*width_scale);
  rightRightTopY = Math.round(c_y*height_scale);
  //alert("Coordinates: x = " + c_x + ", y = "+c_y + " added to right side: right top corner.");
  document.getElementById("RightRightTopX").textContent = (rightRightTopX) + ", ";
  document.getElementById("RightRightTopY").textContent = (rightRightTopY);
  document.getElementById("RightRightTop").className = "table-warning";
}
if(document.getElementById('rightBottom2').checked){
  rightRightBottomX = Math.round(c_x*width_scale);
  rightRightBottomY = Math.round(c_y*height_scale);
  //alert("Coordinates: x = " + c_x + ", y = "+c_y + " added to right side: right bottom corner.");
  document.getElementById("RightRightBottomX").textContent = (rightRightBottomX) + ", ";
  document.getElementById("RightRightBottomY").textContent = (rightRightBottomY);
  document.getElementById("RightRightBottom").className = "table-warning";
}





}
function imageZoom(imgID, resultID) {
  var v =  document.getElementById("lens")
  if(typeof(v) != 'undefined' && v != null) {
    v.remove();
  }
  else{
    
  }
 
  var img, lens, result, cx, cy;
  var redDot;
  img = document.getElementById(imgID);
  result = document.getElementById(resultID);
  /*create lens:*/
  lens = document.createElement("DIV");
  lens.setAttribute("id","lens");
  lens.setAttribute("class", "img-zoom-lens");
  redDot = document.createElement("DIV");
  redDot.setAttribute("class", "img-zoom-reddot");
  /*insert lens:*/
  img.parentElement.insertBefore(lens, img);
  /*calculate the ratio between result DIV and lens:*/
  cx = result.offsetWidth / lens.offsetWidth;
  cy = result.offsetHeight / lens.offsetHeight;
 
  /*set background properties for the result DIV:*/
  result.style.backgroundImage = "url('" + img.src + "')";
  result.style.backgroundSize = (img.width * cx) + "px " + (img.height * cy) + "px";


  /*execute a function when someone moves the cursor over the image, or the lens:*/
  lens.addEventListener("mousemove", moveLens);
  img.addEventListener("mousemove", moveLens);
  /*and also for touch screens:*/
  lens.addEventListener("touchmove", moveLens);
  img.addEventListener("touchmove", moveLens);

  function moveLens(e) {
    var pos, x, y;
    /*prevent any other actions that may occur when moving over the image:*/
    e.preventDefault();
    /*get the cursor's x and y positions:*/
    pos = getCursorPos(e);
    /*calculate the position of the lens:*/
    x = (pos.x* width_scale - (lens.offsetWidth / 2)) ;
    y = (pos.y* height_scale - (lens.offsetHeight / 2)) ;
    
    /*prevent the lens from being positioned outside the image:*/
 
    if (x > img.width*width_scale - lens.offsetWidth) {x = img.width*width_scale - lens.offsetWidth;}
    if (x < 0) {x = 0;}
    if (y > img.height*height_scale - lens.offsetHeight) {y = img.height*height_scale - lens.offsetHeight;}
    if (y < 0) {y = 0;}
    /*set the position of the lens:*/
    lens.style.left = x/width_scale - 10 + "px";
    lens.style.top = y/height_scale -10 + "px";
    /*display what the lens "sees":*/
    result.style.backgroundPosition = "-" + (x * cx) + "px -" + (y * cy) + "px";
  }
  function getCursorPos(e) {
    var a, x = 0, y = 0;
    e = e || window.event;
    /*get the x and y positions of the image:*/
    a = img.getBoundingClientRect();
    /*calculate the cursor's x and y coordinates, relative to the image:*/
    x = e.pageX - a.left;
    y = e.pageY - a.top;
   
    /*consider any page scrolling:*/
    x = x - window.pageXOffset;
    y = y - window.pageYOffset;
    
    return {x : x, y : y};
  }
  

}

function sendCoordinates(){
  
  var xhr = new XMLHttpRequest();
  var url = "http://localhost:5000/save_coords"; //URL A backendből, ahová a koordinátákat küldöm.
  xhr.open("POST", url, true);
  xhr.setRequestHeader("Content-Type", "application/json;charset=UTF-8");


  
  xhr.onreadystatechange = function () {
    if (xhr.readyState === 4 && xhr.status === 200) {
       //Responese handling
       //var json = JSON.parse(xhr.responseText);
       FrontEndMessage("Success! Coordinates sent for: " + cameraURLCurrent, "alert alert-warning");
    }
    else{

      FrontEndMessage("Cannot send coordinates. (Server error)", "alert alert-danger");

    }
  };
//sample data

// lltx -> l = left, l = left, t = top, x = x

/*
var myArray = {
  URL: cameraURLCurrent,
  lltx: leftLeftTopX, llty: leftLeftTopY,
   llbx: leftLeftBottomX, llby: leftLeftBottomY, 
   lrtx: leftRightTopX, lrty: leftRightTopY, 
   lrbx: leftRightBottomX, lrby: leftRightBottomY,
   rltx: rightLeftTopX, rlty: rightLeftTopY,
   rlbx: rightLeftBottomX, llby: rightLeftBottomY, 
   rrtx: rightRightTopX, rrty: rightRightTopY, 
   rrbx: rightRightBottomX, rrby: rightRightBottomY
  };
*/
var myArray = {
  match_id:123,
  media_id:0,
  media_url:0,
  ltx:leftLeftTopX,
  lty:leftLeftTopY,
  lbx:leftLeftBottomX,
  lby:leftLeftBottomY,
  rtx:leftRightTopX,
  rty:leftRightTopY,
  rbx:leftRightBottomX,
  rby:leftRightBottomY
  };

var data = JSON.stringify(myArray);
//alert(data);
xhr.send(data);

}



function getImage(){

  //TEST FUNCTION - ONLY UNCOMMENT FOR DEBUG
  //document.getElementById('sendCoords').style="display:inline-block"
  document.getElementById('ContainerPointChooser').style="display:block"

  document.getElementById('startRec').style="display:inline-block"
  document.getElementById('tableCoords').style="display:block"

  document.getElementById('loadingBar').style="display:block"
  document.getElementById('loadingText').style="display:block"
  var xhr = new XMLHttpRequest();
  var url = "http://localhost:5000/get_camera_image"; //URL A backendből, ahová a koordinátákat küldöm.
  xhr.open("POST", url, true);
  xhr.setRequestHeader("Content-Type", "application/json;charset=UTF-8");
  document.getElementById("myimage").src = "https://themastermindsite.files.wordpress.com/2019/04/3-1-4-2-formation-11v11.jpg?w=1040";
  
  xhr.onreadystatechange = function () {
    if (xhr.readyState === 4 && xhr.status === 200) {
      
       //Responese handling
       var json = JSON.parse(xhr.responseText);
       //alert(xhr.responseText);

       //document.getElementById("myimage").src = 'data:image/jpg;base64,'+ json["image"];
       imageSource = 'data:image/jpg;base64,'+ json["image"];
       //alert(imageSource)
       
       refresh();
       naturalWidth = document.getElementById("myimage").naturalWidth;
       naturalHeight = document.getElementById("myimage").naturalHeight;

       //document.getElementById('sendCoord').style="display:block"
       document.getElementById('startRec').style="display:block"


       document.getElementById("myimage").width = 1000
       document.getElementById("myimage").height = 500
          width_scale = naturalWidth / document.getElementById('myimage').width;
 	height_scale = naturalHeight / document.getElementById('myimage').height;

       FrontEndMessage("Success. Image received from server for: " + cameraURLCurrent, "alert alert-warning");
       document.getElementById('loadingBar').style="display:none"
       document.getElementById('loadingText').style="display:none"
 
    }
    else{
      FrontEndMessage("Cannot get image. (Server error)", "alert alert-danger");
      document.getElementById('loadingBar').style="display:none"
      document.getElementById('loadingText').style="display:none"

    }
};

var data = `{"match_id":${matchID}, "camera_number":0}`;

//alert(data);
//sample data
xhr.send(data);

document.getElementById('loadingBar').style="display:block"
imageZoom("myimage", "myresult");
}




function refresh(){

 var my_img = document.getElementById("myimage");
 my_img.src = imageSource;
 
 naturalWidth = my_img.naturalWidth
 naturalHeight = my_img.naturalHeight
 
 buttonCall3();
 alert()
 //alert("buttoncall3")

}



function buttonCall4(){
  buttonCall3();
}


function buttonCall3(){
  imageZoom("myimage", "myresult");
  
}


function loadFile(event){
  
  var a = document.getElementById("myimage");
  var test = new Image();
  test.onload = function() {legacyWidth = test.width; legacyHeight = test.height;}
  test.src = URL.createObjectURL(event.target.files[0]);
  imageSource = URL.createObjectURL(event.target.files[0]);
}


function FrontEndMessage(text,type){
  document.getElementById("generalErrorMsg").textContent=text;
  document.getElementById("generalErrorMsg").className=type;
  document.getElementById("generalErrorMsg").style="display:block";
}


function FrontEndMessageDisappear(){
  document.getElementById("generalErrorMsg").style="display:none";

}

function startRecording(){
sendCoordinates()
var xhr = new XMLHttpRequest();
var url = " http://127.0.0.1:5000/start_recording"; 
//var url = document.getElementById("setCamera").value
xhr.open("POST", url, true);
xhr.setRequestHeader("Content-Type", "application/json;charset=UTF-8");

var data = {
   "match_id":1234,
   "media_type":"camera",
   "media_url":"ad"
}

xhr.onreadystatechange = function () {
  
  if (xhr.readyState === 4 && xhr.status === 200) {
      
     //Responese handling
     //var json = JSON.parse(xhr.responseText);
     //alert(json.responseText);
     //sample data

     sendForm();
 
  }
  else{
    
    FrontEndMessage("Cannot start recording. (Server error)", "alert alert-danger");
  }
};
var data = 
{
   "match_id":123,
   "processing_type":"gpu",
}
var data_json = JSON.stringify(data);
xhr.send(data_json);

}


</script>

<br>
<br>

  <div class="container" style="display:none" id="tableCoords">

      <table class="table table-sm table-hover align-bottom">
        
      <tr>
      <th class="table-active">
        Left Side
      </th>
      <th class="table-active">
        Right Side
      </th>
      </tr>
      <tr>

      </tr>
        <th id="LeftLeftTop">
        
          L1
          <span id="LeftLeftTopX"></span>
          <span id="LeftLeftTopY"></span></th>
        
            <th  id="RightLeftTop">
  
              R1
              <span id="RightLeftTopX"></span>
              <span id="RightLeftTopY"></span></th>
          </tr> 

          <tr>
          <th  id="LeftLeftBottom">
          L2
          <span id="LeftLeftBottomX"></span>
          <span id="LeftLeftBottomY"></span>

        </th>
        <th  id="RightLeftBottom">

      
        R2
        <span id="RightLeftBottomX"></span>
        <span id="RightLeftBottomY"></span></th>
        </tr>
       <th id="LeftRightTop">
        L3
        <span id="LeftRightTopX"></span>
        <span id="LeftRightTopY"></span></th>

        <th id="RightRightTop">
        R3
        <span id="RightRightTopX"></span>
        <span id="RightRightTopY"></span></th>
   
        
    
    <tr>
      <th id="LeftRightBottom">
        L4
        <span id="LeftRightBottomX"></span>
        <span id="LeftRightBottomY"></span></th> 

        <th id="RightRightBottom">
    R4
    <span id="RightRightBottomX"></span>
    <span id="RightRightBottomY"></span></th></tr> 
    
    
      </table>

    
  </div>

  

  <div class="container">
    <div  id="generalErrorMsg" class="alert alert-danger" style="display: none;">
      <strong id="ErrorMsg">Lorem</strong> Ipsum
    </div>
    
  </div>

<div id="ContainerPointChooser" style="display:none">




<div class="container">

  <select id = "lefthalfselect" class="form-control-input" aria-label=".form-select-lg example">
    
    <option selected>Choose point!</option>
    <option  value="leftTop">leftTop</option>
    <option value="leftBottom">leftBottom</option>
    <option value="rightTop">rightTop</option>
    <option value="rightBottom">rightBottom</option>

  </select>

  <button class="btn btn-outline-secondary" style="margin-top: 20px; margin-bottom: 20px" type="button" id="leftReady1" onclick="leftReady()"name="leftReady1">Set</button>

  


  <select id = "righthalfselect" class="form-control-input" aria-label=".form-select-lg example">
    <option selected>Choose point!</option>
    <option value="leftTop">leftTop2</option>
    <option value="leftBottom">leftBottom2</option>
    <option value="rightTop">rightTop2</option>
    <option value="rightBottom">rightBottom2</option>
  </select>

    <button type="button" id="rightReady1"  style="margin-top: 20px; margin-bottom: 20px" onclick="rightReady()"name="rightReady1" class="btn btn-outline-secondary">Set</button>


</div>
  

<div class="container" style="margin-bottom: 20px"> 

  <!--<button id="sendCoord" style="display:none" onclick="sendCoordinates()" type="button" class="btn btn-secondary ">Send Coordinates</button>
  -->
    <button id="startRec" style="display:none" onclick="startRecording()" type="button" class="btn btn-warning ">Start Detection!</button>

</div>


<div class="container" style="display:none">


<table class="table table-fit">
  <form>
  <tr>
    <th class="align-center">
      
      <input type="checkbox" id="leftTop" name="leftSide" value="Left Top Corner">
      <label for="leftTop"class="align-bottom"> Left Top Corner</label>
    
     
      <input type="checkbox" id="leftBottom" name="leftSide" value="Left Bottom Corner">
      <label for="leftBottom"> Left Bottom Corner</label>

      

      <input type="checkbox" id="rightTop" name="leftSide" value="Right Top Corner">
      <label for="rightTop" > Right Top Corner</label>
 
 
      <input type="checkbox" id="rightBottom" name="leftSide" value="Right Bottom Corner">
      <label for="rightBottom"> Right Bottom Corner</label>

     </th>

    
  
  </tr>

  <br>
</form>

<form>
  
  <tr>
    <th class="align-bottom">

 <input type="checkbox" id="leftTop2" name="rightSide" value="Left Top Corner">
  <label for="leftTop"> Left Top Corner</label>


  <input type="checkbox" id="leftBottom2" name="rightSide" value="Left Bottom Corner">
  <label for="leftBottom"> Left Bottom Corner</label>


  <input type="checkbox" id="rightTop2" name="rightSide" value="Right Top Corner">
  <label for="rightTop"> Right Top Corner</label>

  <input type="checkbox" id="rightBottom2" name="rightSide" value="Right Bottom Corner">
  <label for="rightBottom"> Right Bottom Corner</label>

</th>

</tr>

<br>
</form>

</table>
</div>

</div>

<div class="container">
 
  <div class="row">

    
      <div id="box" class="img-zoom-container">
        <img id="myimage" src="https://t3.ftcdn.net/jpg/02/93/12/72/360_F_293127241_bMzrEAk3zhehEnsLw6y4k3HfFewopUPG.jpg" (click) = "printMousePos($event)" >
       
      </div>

  </div>

    <div class="row">
      <div id="myresult" class="img-zoom-result">
        <div class="img-zoom-reddot"></div>
        </div>
    
      </div>
   
  </div>





<script>

imag = document.getElementById("myimage");


// Initiate zoom effect:
img = document.getElementById("myimage");
document.getElementById('box').addEventListener("click",myfunc);
function getCursorPosX(e) {
    var a, x = 0, y = 0;
    e = e || window.event;
    /*get the x and y positions of the image:*/
    a = img.getBoundingClientRect();
    /*calculate the cursor's x and y coordinates, relative to the image:*/
    x = e.pageX - a.left;
    y = e.pageY - a.top;
    /*consider any page scrolling:*/
    x = x - window.pageXOffset;
    y = y - window.pageYOffset;
    return x;
  }

  function getCursorPosX(e) {
    var a, x = 0, y = 0;
    e = e || window.event;
    /*get the x and y positions of the image:*/
    a = img.getBoundingClientRect();
    /*calculate the cursor's x and y coordinates, relative to the image:*/
    x = e.pageX - a.left;
    y = e.pageY - a.top;
    /*consider any page scrolling:*/
    x = x - window.pageXOffset;
    y = y - window.pageYOffset;
    return x;
  }

  function getCursorPosY(e) {
    var a, x = 0, y = 0;
    e = e || window.event;
    /*get the x and y positions of the image:*/
    a = img.getBoundingClientRect();
    /*calculate the cursor's x and y coordinates, relative to the image:*/
    x = e.pageX - a.left;
    y = e.pageY - a.top;
    /*consider any page scrolling:*/
    x = x - window.pageXOffset;
    y = y - window.pageYOffset;
    return y;
  }

legacyWidth = 540;
legacyHeight = 460;

var lastChecked = "";
var lastCheckedRight = "";
var currentChosen = "";
var currentChosenRight = "";

function myfunc(e){

  var c_x, c_y;
  c_x = getCursorPosX(e);
  c_y = getCursorPosY(e);

  var e = document.getElementById("lefthalfselect");
  var rgh = document.getElementById("righthalfselect");



  currentChosen = e.options[e.selectedIndex].text;
  currentChosenRight = rgh.options[rgh.selectedIndex].text;

  if(leftReadyBoolean == false ){
    document.getElementById(currentChosen).checked = true;
  if(lastChecked != ""){
    document.getElementById(lastChecked).checked = false;
  }

  lastChecked = currentChosen;
  }
    else{
      if(rightReadyBoolean == false )
        document.getElementById(currentChosenRight).checked = true;

    if(lastCheckedRight != ""){
      document.getElementById(lastCheckedRight).checked = false;
      }

    lastCheckedRight = currentChosenRight;
      
      
    }

  display(c_x,c_y);
}

buttonCall3();
</script>

<div class="container">


    <!--
    <input type="text"  placeholder="Enter width..." id = "setWidth" >
    <button id="btnw" type="button" class="btn btn-outline-secondary" onclick="buttonCall()">Set Width </button>
    <input type="text" placeholder="Enter height..." id = "setHeight" >
    <button id="btnh" onclick="buttonCall2()"type="button" class="btn btn-outline-secondary">Set Height</button>
 
  -->

</div>
</body>

<!-- Scripts -->
<script src="js/jquery.min.js"></script> <!-- jQuery for Bootstrap's JavaScript plugins -->
<script src="js/popper.min.js"></script> <!-- Popper tooltip library for Bootstrap -->
<script src="js/bootstrap.min.js"></script> <!-- Bootstrap framework -->
<script src="js/jquery.easing.min.js"></script> <!-- jQuery Easing for smooth scrolling between anchors -->
<script src="js/jquery.countdown.min.js"></script> <!-- The Final Countdown plugin for jQuery -->
<script src="js/swiper.min.js"></script> <!-- Swiper for image and text sliders -->
<script src="js/jquery.magnific-popup.js"></script> <!-- Magnific Popup for lightboxes -->
<script src="js/validator.min.js"></script> <!-- Validator.js - Bootstrap plugin that validates forms -->
<script src="js/scripts.js"></script> <!-- Custom scripts -->
